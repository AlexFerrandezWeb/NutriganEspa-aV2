<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gracias por su Compra - Nutrigan Espa√±a</title>
    <meta name="description"
        content="Gracias por confiar en Nutrigan Espa√±a. Su pedido ha sido procesado correctamente.">
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <link rel="shortcut icon" type="image/png" href="assets/favicon.png">
    <link rel="apple-touch-icon" href="assets/favicon.png">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="reset.css">
    <!-- Font Awesome para el icono del carrito -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts - Montserrat Alternates y Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">

    <!-- Google Customer Reviews Badge -->
    <script src="https://apis.google.com/js/platform.js?onload=renderBadge" async defer></script>
    <script>
        window.renderBadge = function () {
            if (document.getElementById('google-reviews-badge')) {
                return;
            }

            var ratingBadgeContainer = document.createElement("div");
            ratingBadgeContainer.id = "google-reviews-badge";
            ratingBadgeContainer.style.cssText = "position: fixed; bottom: 100px; right: 20px; z-index: 999; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); padding: 8px;";
            document.body.appendChild(ratingBadgeContainer);

            window.gapi.load('ratingbadge', function () {
                window.gapi.ratingbadge.render(ratingBadgeContainer, { "merchant_id": 5663326184 });

                setTimeout(() => {
                    ratingBadgeContainer.style.cssText = "position: fixed !important; bottom: 100px !important; right: 20px !important; z-index: 999 !important; background: white !important; border-radius: 8px !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important; padding: 8px !important;";
                }, 1000);
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            if (window.gapi) {
                window.renderBadge();
            }
        });
    </script>
</head>

<body>
    <nav class="nav-principal">
        <div class="nav-superior">
            <div class="nav-hamburguesa-container">
                <button class="nav-hamburguesa" aria-label="Abrir men√∫" aria-expanded="false"
                    aria-controls="menu-izquierda-movil">
                    <span class="linea1"></span>
                    <span class="linea2"></span>
                </button>
                <div class="texto-menu-container">
                    <span class="texto-actual">Men√∫</span>
                    <span class="texto-siguiente">Cerrar</span>
                </div>
            </div>
            <ul class="menu-izquierda-escritorio">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="sobreNosotros.html">Sobre nosotros</a></li>
                <li><a href="feriaTineo.html">Feria Tineo</a></li>
            </ul>
            <div class="nav-logo">
                <a href="index.html" class="logo-link">
                    <img src="assets/logo_nutriganesp.png" alt="Logo Nutrigan Espa√±a" class="logo">
                </a>
            </div>
            <div class="nav-derecha">
                <div class="carrito-container">
                    <a href="carrito.html" class="carrito-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="carrito-contador" id="carrito-contador">0</span>
                    </a>
                </div>
            </div>
        </div>
        <form class="nav-buscador" action="#" method="get" role="search">
            <div class="buscador-input-container">
                <input type="search" name="q" placeholder="Buscar productos..." class="buscador-input"
                    id="buscador-input">
                <button type="submit" class="buscador-boton" aria-label="Buscar">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </form>
    </nav>

    <!-- Men√∫ m√≥vil -->
    <div class="menu-izquierda-movil" id="menu-izquierda-movil">
        <ul class="menu-movil-lista">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="productos.html">Productos</a></li>
            <li><a href="sobreNosotros.html">Sobre nosotros</a></li>
            <li><a href="feriaTineo.html">Feria Tineo</a></li>
        </ul>
    </div>

    <!-- Hero Section -->
    <div class="carrusel-container">
        <!-- Texto hero superpuesto sobre el carrusel -->
        <div class="hero-overlay">
            <div class="hero-texto">
                <div class="gracias-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h1 class="hero-titulo">¬°GRACIAS POR SU COMPRA!</h1>
                <p class="hero-subtitulo">Su pedido ha sido procesado correctamente</p>
                <p class="hero-descripcion">Hemos recibido su pedido y lo estamos procesando. En breve recibir√° un email
                    del recibo con todos los detalles.</p>
                <a href="index.html" class="hero-cta">VOLVER AL INICIO</a>
            </div>
        </div>
    </div>

    <!-- Informaci√≥n del Pedido -->
    <section class="pedido-info">
        <div class="pedido-container">
            <div class="pedido-content">
                <h2 class="pedido-titulo">Informaci√≥n del Pedido</h2>
                <div class="pedido-details">
                    <div class="pedido-item">
                        <span class="pedido-label">N√∫mero de Pedido:</span>
                        <span class="pedido-value" id="numero-pedido">#NUT-2025-001</span>
                    </div>
                    <div class="pedido-item">
                        <span class="pedido-label">Fecha:</span>
                        <span class="pedido-value" id="fecha-pedido">29 de septiembre de 2025</span>
                    </div>
                    <div class="pedido-item">
                        <span class="pedido-label">Estado:</span>
                        <span class="pedido-value pedido-enviado">Env√≠o realizado</span>
                    </div>
                    <div class="pedido-item">
                        <span class="pedido-label">Total:</span>
                        <span class="pedido-value pedido-total" id="total-pedido">0,00 ‚Ç¨</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Google Customer Reviews Widget -->
    <section class="google-reviews-section">
        <div class="google-reviews-container">
            <h2 class="google-reviews-titulo">¬øC√≥mo fue su experiencia?</h2>
            <p class="google-reviews-descripcion">Su opini√≥n es muy importante para nosotros. ¬°Ay√∫denos a mejorar!</p>
            <div id="google-reviews-widget" class="google-reviews-widget">
                <!-- El widget de Google se cargar√° aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- Informaci√≥n de Contacto -->
    <section class="contacto-pedido">
        <div class="contacto-container">
            <div class="contacto-content">
                <h2 class="contacto-titulo">¬øNecesita Ayuda?</h2>
                <p class="contacto-descripcion">Si tiene alguna pregunta sobre su pedido o necesita asistencia, no dude
                    en contactarnos.</p>
                <div class="contacto-info">
                    <div class="contacto-item">
                        <i class="fas fa-phone"></i>
                        <span>+34 626 983 042</span>
                    </div>
                    <div class="contacto-item">
                        <i class="fas fa-envelope"></i>
                        <span>javiernutrigan@gmail.com</span>
                    </div>
                    <div class="contacto-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>C/El Cortin n¬∞63, El Crucero - Tineo 33877 (Asturias)</span>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <!-- Secci√≥n de Contacto -->
            <div class="footer-seccion">
                <h3 class="footer-titulo">Contacto</h3>
                <div class="footer-contenido">
                    <p><i class="fas fa-phone"></i> +34 626 983 042</p>
                    <p><i class="fas fa-envelope"></i> javiernutrigan@gmail.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> C/El Cortin n¬∞63<br>El Crucero - Tineo 33877 (Asturias)</p>
                </div>
            </div>

            <!-- Secci√≥n de Informaci√≥n Legal -->
            <div class="footer-seccion">
                <h3 class="footer-titulo">Informaci√≥n Legal</h3>
                <div class="footer-contenido">
                    <a href="aviso-legal.html" class="footer-enlace">Aviso Legal</a>
                    <a href="politica-privacidad.html" class="footer-enlace">Pol√≠tica de Privacidad</a>
                    <a href="politica-cookies.html" class="footer-enlace">Pol√≠tica de Cookies</a>
                    <a href="terminos-condiciones.html" class="footer-enlace">T√©rminos y Condiciones</a>
                    <a href="politica-devoluciones.html" class="footer-enlace">Pol√≠tica de Devoluciones</a>
                </div>
            </div>

            <!-- Secci√≥n de S√≠guenos -->
            <div class="footer-seccion">
                <h3 class="footer-titulo">S√≠guenos</h3>
                <div class="footer-contenido">
                    <div class="footer-redes-sociales">
                        <a href="https://www.facebook.com/p/Nutrigan-Espa%C3%B1a-61554696603699/" class="red-social"
                            aria-label="Facebook" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- L√≠nea de copyright -->
        <div class="footer-copyright">
            <p>&copy; 2025 Nutrigan Espa√±a. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Bot√≥n flotante de WhatsApp -->
    <a href="https://wa.me/34626983042?text=Hola,%20me%20interesan%20sus%20productos%20de%20nutrici√≥n%20animal"
        class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Contactar por WhatsApp">
        <i class="fab fa-whatsapp"></i>
        <span class="whatsapp-texto">Asesoramiento gratuito</span>
    </a>

    <!-- Scripts -->
    <script src="main.js"></script>
    <script>
        // Mostrar informaci√≥n del pedido desde localStorage
        document.addEventListener('DOMContentLoaded', function () {
            const pedido = JSON.parse(localStorage.getItem('ultimoPedido') || '{}');
            const carrito = JSON.parse(localStorage.getItem('carrito') || '[]');

            // Mostrar n√∫mero de pedido
            if (pedido.numero) {
                document.getElementById('numero-pedido').textContent = pedido.numero;
            }

            // Mostrar fecha
            if (pedido.fecha) {
                document.getElementById('fecha-pedido').textContent = pedido.fecha;
            }

            // Calcular y mostrar total
            const total = carrito.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
            document.getElementById('total-pedido').textContent = total.toFixed(2) + ' ‚Ç¨';

            // Limpiar carrito despu√©s de la compra
            localStorage.removeItem('carrito');
            localStorage.removeItem('ultimoPedido');

            // Actualizar contador del carrito
            const cartCount = document.getElementById('nav-cart-count');
            if (cartCount) {
                cartCount.textContent = '0';
            }
        });
    </script>

    <!-- Google Customer Reviews -->
    <script src="https://apis.google.com/js/platform.js?onload=renderOptIn" async defer></script>
    <script>
        // Funci√≥n de prueba para simular datos de pedido
        function simularDatosPedido() {
            const datosPrueba = {
                pedidoId: 'TEST-' + Date.now().toString().slice(-6),
                email: 'test@nutrigan.es',
                productos: [
                    {
                        nombre: 'Bolutech Flash',
                        gtin: '1234567890123',
                        precio: 59.69,
                        cantidad: 1
                    }
                ]
            };
            localStorage.setItem('ultimoPedido', JSON.stringify(datosPrueba));
            console.log('Datos de prueba cargados:', datosPrueba);
        }

        // Cargar datos de prueba si no hay datos reales
        if (!localStorage.getItem('ultimoPedido')) {
            simularDatosPedido();
        }

        // Mostrar mensaje de desarrollo si estamos en localhost
        if (window.location.hostname === '127.0.0.1' || window.location.hostname === 'localhost') {
            console.log('üîß MODO DESARROLLO: Google Reviews puede no funcionar en localhost');
            console.log('‚úÖ En producci√≥n (www.xn--nutriganespaa-tkb.com) funcionar√° correctamente');
        }

        window.renderOptIn = function () {
            console.log('Google API cargada, iniciando renderOptIn...');
            window.gapi.load('surveyoptin', function () {
                console.log('Survey opt-in cargado, obteniendo datos...');
                // Obtener datos del pedido desde localStorage
                const ultimoPedido = JSON.parse(localStorage.getItem('ultimoPedido') || '{}');
                const orderId = ultimoPedido.pedidoId || 'PED' + Date.now().toString().slice(-6);
                const customerEmail = ultimoPedido.email || 'cliente@nutrigan.es';

                console.log('Datos para Google Reviews:', {
                    merchant_id: 5663326184,
                    order_id: orderId,
                    email: customerEmail,
                    delivery_country: "ES",
                    estimated_delivery_date: getEstimatedDeliveryDate(),
                    products: getProductsForGoogleReviews(ultimoPedido.productos || [])
                });

                try {
                    window.gapi.surveyoptin.render(
                        {
                            // REQUIRED FIELDS
                            "merchant_id": 5663326184,
                            "order_id": orderId,
                            "email": customerEmail,
                            "delivery_country": "ES",
                            "estimated_delivery_date": getEstimatedDeliveryDate(),

                            // OPTIONAL FIELDS
                            "products": getProductsForGoogleReviews(ultimoPedido.productos || [])
                        },
                        document.getElementById('google-reviews-widget')
                    );
                    console.log('Google Reviews widget renderizado exitosamente');
                } catch (error) {
                    console.error('Error al renderizar Google Reviews:', error);
                    // Mostrar mensaje alternativo si Google no funciona
                    document.getElementById('google-reviews-widget').innerHTML =
                        '<p style="text-align: center; color: #666; padding: 20px;">Gracias por su compra. Su opini√≥n es muy importante para nosotros.</p>';
                }

            });
        }

        // Funci√≥n para calcular la fecha estimada de entrega (5-10 d√≠as laborables)
        function getEstimatedDeliveryDate() {
            const today = new Date();
            const deliveryDays = 7; // Promedio de 7 d√≠as
            const deliveryDate = new Date(today.getTime() + (deliveryDays * 24 * 60 * 60 * 1000));
            return deliveryDate.toISOString().split('T')[0]; // Formato YYYY-MM-DD
        }

        // Funci√≥n para obtener productos en formato Google Reviews
        function getProductsForGoogleReviews(productos) {
            return productos.map(producto => ({
                "gtin": producto.gtin || "",
                "name": producto.nombre || "",
                "category": "Suplementos Nutricionales",
                "brand": "Nutrigan"
            }));
        }
    </script>
</body>

</html>